variables:
  - template: ./.azure-pipelines/variables.yml

name: ${{variables.name}}-pipeline

trigger:
  - main

stages:
- stage: test
  displayName: Tests
  pool:
    vmImage: ${{ variables.vmImage }}
  jobs:
    - job: cfnTest
      steps:
      - task: UsePythonVersion@0
        inputs:
          versionSpec: ${{ variables.pythonVersion }}
      - script: python -m pip install --upgrade pip
        displayName: 'Install Python tools'
      - script: pip install -r requirements.txt
        displayName: 'Install requirements'
      - script: cfn-lint --include-checks I -t cloudformation/**/*.yml
        displayName: 'Run cfn-lint'
